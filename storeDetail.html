<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水族天堂</title>
    <!-- 手風琴 -->
    <link rel="stylesheet" href="./accordion.css">
    <link rel="stylesheet" href="./style.css">
    <style>
        .banner {
            background: url(./img/banner3.jpg) center / cover no-repeat;
        }

        .main {
            display: flex;
            justify-content: center;
            width: 100%;
            margin: 76px auto;

            .container {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 1320px;

            }

            .mainHeader {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
                border-bottom: 1px solid #B3B1B1;
                padding-bottom: 21px;

                .breadcrumb {

                    a {
                        color: #666666;
                        font-size: 20px;
                        letter-spacing: 2px;
                    }

                    a:last-child {
                        cursor: default;
                        font-weight: 500;
                    }

                    a:not(:first-child)::before {
                        content: " / ";
                        pointer-events: none;
                    }
                }

                .searchbar {
                    position: relative;

                    input {
                        border: 1px solid #B3B1B1;
                        border-radius: 150px;
                        width: 278px;
                        height: 52px;
                        background-color: rgba(0, 0, 0, 0);
                        padding: 0 20px;

                    }

                    input::placeholder {
                        color: #666;
                        font-size: 16px;

                    }

                    .icon {
                        position: absolute;
                        right: 20px;
                        top: 13px;
                        cursor: pointer;
                    }
                }
            }

            .outer {
                display: flex;
                justify-content: space-between;
                width: 100%;
                margin-top: 76px;

                .categories {
                    width: 251px;

                    h3 {
                        color: #52867E;
                        font-size: 24px;
                        letter-spacing: 2px;
                        margin-bottom: 8px;
                    }

                    .accordion button {
                        font-size: 16px;
                    }
                }

                .goodsDetail {
                    width: 987px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;

                    .goodsAttribute {
                        display: flex;
                        width: 100%;
                        justify-content: space-between;
                        /* flex-wrap: wrap; */

                        .goodsPics {
                            .bigPic {
                                margin-bottom: 24px;
                            }

                            .smallPics {
                                display: flex;
                                justify-content: space-between;

                                img {
                                    cursor: pointer;
                                }

                                img:hover {
                                    outline: 5px solid #008CEB;
                                    outline-offset: -1px;
                                }
                                img.active {
                                    outline: 5px solid #008CEB;
                                    outline-offset: -1px;
                                }
                            }
                        }

                        .goodsDescription {
                            display: flex;
                            flex-direction: column;
                            justify-content: space-between;
                            min-height: 400px;

                            .goodsTitle {
                                >h3 {
                                    font-size: 24px;
                                    letter-spacing: 2px;
                                    margin-bottom: 8px;
                                }

                                .price {
                                    display: flex;
                                    color: #FE3372;
                                    align-items: baseline;

                                    span {
                                        font-size: 20px;
                                    }

                                    .money {
                                        display: flex;
                                        align-items: baseline;

                                        h3 {
                                            font-size: 32px;
                                        }
                                    }

                                    >span {
                                        margin-right: 10px;
                                    }
                                }
                            }

                            .goodsSize {
                                font-size: 20px;
                                letter-spacing: 2px;

                                >p {
                                    margin-bottom: 8px;
                                }

                                .size {
                                    button {
                                        width: 84px;
                                        height: 38px;
                                        font-size: 20px;
                                        letter-spacing: 2px;
                                        background-color: #0000;
                                        border: 1px solid #B3B1B1;
                                        color: #666;
                                        border-radius: 4px;
                                        cursor: pointer;
                                    }

                                    button:hover {
                                        background-color: #e4e4e488;
                                    }
                                    button.active {
                                        background-color: #b3b2b288;
                                    }
                                }
                            }

                            .amount {
                                font-size: 20px;
                                letter-spacing: 2px;

                                >p {
                                    margin-bottom: 8px;
                                }

                                .counter {
                                    .number-box {
                                        display: inline-flex;
                                        align-items: center;
                                        justify-content: center;
                                        border: 1px solid #B3B1B1;
                                        /* padding: 5px 10px; */
                                        width: 137px;
                                        height: 38px;
                                        border-radius: 6px;
                                        font-size: 20px;
                                        gap: 15px;
                                        background: none;

                                    }

                                    .number-box .btn {
                                        border: none;
                                        background: none;
                                        font-size: 24px;
                                        cursor: pointer;
                                        padding: 0 5px;
                                    }

                                    .number-box .value {
                                        width: 40px;
                                        height: 38px;
                                        text-align: center;
                                        line-height: 38px;
                                        font-size: 20px;
                                        border-left: 1px solid #B3B1B1;
                                        border-right: 1px solid #B3B1B1;
                                    }
                                }
                            }

                            .addCartBtn {

                                button {
                                    border-radius: 150px;
                                    width: 488px;
                                    height: 62px;
                                    background-color: #008CEB;
                                    border: none;
                                    color: white;
                                    font-size: 24px;
                                    letter-spacing: 2px;
                                    cursor: pointer;
                                }

                                button:hover {
                                    background-color: #0071BE;
                                }
                            }
                        }
                    }

                    .goodsContent {
                        letter-spacing: 2px;

                        h3 {
                            font-size: 32px;
                            margin: 32px 0;
                        }

                        p {
                            font-size: 20px;
                            line-height: 48px;
                        }
                    }
                }
            }
        }
        .cForm {
            display: none;
        }
        .modal {
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            position: fixed;
            z-index: 99999;
            background-color: #fff0;
            display: none;
            .modalContainer {
                position: relative;
                left: 50%;
                top: 50%;
                transform: translate(-50%,-50%);
                width: 340px;
                height: 180px;
                background-color: #0009;
                color: #fff;
                font-size: 24px;
                line-height: 180px;
                text-align: center;
                border-radius: 4px;
                
            }
        }
        .modal.show {
            display: block;
        }
        @media screen and (max-width: 1335px) {
            .main {
                .container {
                    width: 90%;

                    .outer {
                        .goodsDetail {
                            width: 90%;
                            margin-left: 32px;

                            .goodsAttribute {

                                .goodsPics {
                                    margin-bottom: 32px;
                                    margin-right: 32px;
                                    width: 45%;

                                    .bigPic {
                                        img {
                                            width: 100%;
                                        }
                                    }
                                    .smallPics {
                                        img {
                                            width: 20%;
                                        }
                                    }
                                }

                                .goodsDescription {
                                    width: 50%;
                                    .addCartBtn {
                                        button {
                                            width: 100%;
                                            min-width: 100px;
                                        }
                                    }
                                }
                            }
                        }

                    }
                }
            }
        }
        @media screen and (max-width: 768px) {
            .main .container .mainHeader .breadcrumb a {
                font-size: 16px;
            }
            .main .container .mainHeader .searchbar input {
                width: 180px;
            }
            .main .container .mainHeader .searchbar input::placeholder {
                font-size: 14px;
            }
            .main .container .outer .goodsDetail .goodsAttribute {
                flex-direction: column;
                .goodsPics {
                    width: 100%;
                }
                .goodsDescription {
                    width: 100%;
                }
            }
        }
        @media screen and (max-width:430px){
            .main .container .mainHeader {
                .searchbar {
                    input {
                        height: 32px;
                    }

                    input::placeholder {
                        font-size: 14px;
                        
                    }
                    .icon {
                        right: 12px;
                        top: 8px;
                        img {
                            width: 16px;
                        }
                    }
                }
            }
            .main .container .outer {
                flex-direction: column;
                margin-top: 32px;
            }
            .main .container .outer .categories {
                width: 100%;
                .accordion {
                    display: none;
                }
                .cForm {
                    display: block;
                    form {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        gap: 8px;
                        .cFormItem {
                            display: flex;
                            flex-direction: column;
                            width: 100%;
                            gap: 8px;
                            select {
                                height: 32px;
                                background-color: #fff0;
                                border: 1px solid #B3B1B1;
                                transition: all .25s;
                            }
                            select:focus {
                                z-index: 3;
                                border-color: #86b7fe;
                                outline: 0;
                                box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
                            }
                        }
                        button[type="submit"] {
                            background-color: #008CEB;
                            color: #fff;
                            border: none;
                            height: 48px;
                            width: 96px;
                            border-radius: 4px;
                            font-size: 16px;
                            margin: 16px 0;
                        }
                    }
                }
            }
            .main .container .outer .goodsDetail {
                width: 100%;
                margin-left: 0;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="navLogo">
            <a href="./index.html">
                <img src="./img/navLogo.svg" alt="Logo">
            </a>
        </div>
        <nav class="navList">
            <ul>
                <li>
                    <a href="./about.html">關於我們</a>
                </li>
                <li>
                    <a href="./news.html">最新消息</a>
                </li>
                <li>
                    <a href="./area.html">門市資訊</a>
                </li>
                <li>
                    <a href="./store.html">所有商品</a>
                </li>
        </nav>
        </div>
        <div class="icons">
            <a href="./contact.html">
                <img src="./img/letter.svg" alt="contact">
            </a>
            <a href="./cart.html" class="cartIcon">
                <img src="./img/cart.svg" alt="cart">
                <div class="cartNumber">1</div>
            </a>
        </div>
        <label class="hb">
            <input type="checkbox" class="menu-switch">
            <span class="bar bar1"></span>
            <span class="bar bar2"></span>
            <span class="bar bar3"></span>
        </label>
        <div class="backdrop"></div>
    </header>
    <section class="banner">
        <div class="title">
            <h1>STORE</h1>
            <h2>線上商店</h2>
        </div>
    </section>
    <div class="main">
        <div class="container">

            <div class="mainHeader">
                <div class="breadcrumb">
                    <a href="./store.html" class="bcItem">商品總覽</a>
                    <a href="./store.html" class="bcItem">中小型魚</a>
                    <a href="./storeDetail.html" class="bcItem">白金鼠魚</a>
                </div>
                <div class="searchbar">
                    <input type="text" placeholder="搜尋">
                    <span class="icon">
                        <img src="./img/zoom.svg" alt="">
                    </span>
                </div>
            </div>
            <div class="outer">
                <div class="categories">
                    <h3>商品分類</h3>
                    <div class="accordion">
                        <div class="accordionItem show">
                            <button>活體區</button>
                            <div class="content">
                                <a href="">中小型魚</a>
                                <a href="">大型魚</a>
                                <a href="">其他</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>魚飼料</button>
                            <div class="content">
                                <a href="">中小型魚</a>
                                <a href="">底棲</a>
                                <a href="">活餌</a>
                                <a href="">大型魚</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>魚缸</button>
                            <div class="content">
                                <a href="">迷你缸</a>
                                <a href="">智能生態缸</a>
                                <a href="">大型缸</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>水草區</button>
                            <div class="content">
                                <a href="">陰性水草</a>
                                <a href="">莫絲</a>
                                <a href="">高莖水草</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>水質處理區</button>
                            <div class="content">
                                <a href="">藥劑</a>
                                <a href="">水質設備</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>周邊用品</button>
                            <div class="content">
                                <a href="">清潔用品</a>
                                <a href="">漁網</a>
                                <a href="">氣泡石</a>
                                <a href="">繁殖盒</a>
                                <a href="">風管</a>
                                <a href="">水草用品</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>設備區</button>
                            <div class="content">
                                <a href="">馬達</a>
                                <a href="">照明設備</a>
                                <a href="">溫控設備</a>
                                <a href="">零配件</a>
                                <a href="">過濾器材</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>造景與擺飾</button>
                            <div class="content">
                                <a href="">背景板</a>
                                <a href="">假水草</a>
                                <a href="">沉木</a>
                                <a href="">各式飾品</a>
                            </div>
                        </div>
                    </div>
                    <div class="cForm">
                        <form action="">
                            <div class="cFormItem">
                                <label for="cClass">選擇類別</label>
                                <select name="" id="cClass">
                                    <option value="0">活體區</option>
                                    <option value="1">魚飼料</option>
                                    <option value="2">魚缸</option>
                                    <option value="3">水草區</option>
                                    <option value="4">水質處理區</option>
                                    <option value="5">周邊用品</option>
                                    <option value="6">設備區</option>
                                    <option value="7">造景與擺飾</option>
                                </select>
                            </div>
                            <div class="cFormItem">
                                <label for="cSubClass">選擇細項</label>
                                <select name="" id="cSubClass">
                                    <option value="">全部</option>
                                    <option value="0">中小型魚</option>
                                    <option value="1">大型魚</option>
                                    <option value="2">其他</option>
                                </select>
                            </div>
                            <button type="submit">送出</button>
                        </form>
                    </div>
                </div>
                <div class="goodsDetail">
                    <div class="goodsAttribute">
                        <div class="goodsPics">
                            <div class="bigPic">
                                <img src="./img/goodsBigPic1.png" alt="bigPic" class="big">
                            </div>
                            <div class="smallPics">
                                <img src="./img/goodsSmallPic1.png" alt="1" class="small active">
                                <img src="./img/goodsSmallPic2.png" alt="2" class="small">
                                <img src="./img/goodsSmallPic3.png" alt="3" class="small">
                                <img src="./img/goodsSmallPic4.png" alt="4" class="small">
                            </div>
                        </div>
                        <div class="goodsDescription">
                            <div class="goodsTitle">
                                <h3>白金鼠魚</h3>
                                <div class="price">
                                    <span>促銷價</span>
                                    <div class="money">
                                        <span>NT</span>
                                        <h3>$20</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="goodsSize">
                                <p>尺寸</p>
                                <div class="size">
                                    <button >幼魚</button>
                                    <button class='active'>成魚</button>
                                </div>
                            </div>
                            <div class="amount">
                                <p>數量</p>
                                <div class="counter">
                                    <div class="number-box">
                                        <button class="btn minus">-</button>
                                        <span class="value">1</span>
                                        <button class="btn plus">+</button>
                                    </div>
                                </div>
                            </div>
                            <div class="addCartBtn">
                                <button>加購物車</button>
                            </div>
                        </div>
                    </div>
                    <div class="goodsContent">
                        <h3>商品詳細說明</h3>
                        <p>白金鼠魚 (Platinum Corydoras)
                        </p>
                        <p>
                                白金鼠魚以其圓潤的體態和活潑可愛的動作，成為水族箱中最受歡迎的底棲魚之一。牠們全身覆蓋著一層細緻的銀白或淡金色光澤，在光線下閃爍著溫和的光芒，為您的水底風景增添一抹寧靜的優雅。牠們性情溫和、容易照顧，是將「療癒與自然」帶入您居家生活的最佳選擇。
                                魚體呈現均勻的銀白或淡金色光澤，魚鰭透明潔淨。成魚約 5-7 公分，體型圓潤討喜。經本店純淨檢疫養護，健康活潑、活力十足，可安心入缸。偏中性至弱酸性軟水（PH
                            6.5-7.5），水溫
                            22°C - 28°C。
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal">
            <div class="modalContainer">
                <p>商品已加入購物車</p>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="outer">

            <div class="footerlogo">
                <a href="./index.html">
                    <img src="./img/footerLogo.svg" alt="Logo">
                </a>
            </div>
            <div class="info">
                <p>營業時間 | 周一至周六09:30-20:00</p>
                <p>電話 | 03-8964426</p>
                <p>傳真 | 03-8964426</p>
                <p>地址 | 320桃園市中壢區復興路46號</p>
            </div>
            <div class="tag">
                <a href="./about.html">關於我們</a>
                <a href="./news.html">最新消息</a>
                <a href="./area.html">門市資訊</a>
                <a href="./store.html">所有商品</a>
            </div>
            <div class="icons">
                <a href="" class="icon">
                    <img src="./img/ic_fb.svg" alt="fb">
                </a>
                <a href="" class="icon">
                    <img src="./img/ic_ig.svg" alt="ig">
                </a>
                <a href="" class="icon">
                    <img src="./img/ic_twitter.svg" alt="twitter">
                </a>
            </div>
        </div>
    </footer>
    
    <!-- 手風琴 -->
    <script src="./accordion.js">
    </script>
    <script src="./cart.js"></script>
    <script>
        const box = document.querySelector('.number-box');
        const valueEl = box.querySelector('.value');
        let value = 1;

        box.querySelector('.minus').onclick = () => {
            value--;
            if (value < 1) {
                value = 1
                return
            }
            valueEl.textContent = value;
        };

        box.querySelector('.plus').onclick = () => {
            value++;
            valueEl.textContent = value;
        };

        const big = document.querySelector(".big")
        const smalls = document.querySelectorAll(".small")

        smalls.forEach(function (small) {
            small.addEventListener("click", function (e) {
                this.closest(".smallPics").querySelector(".active").classList.remove("active")
                this.classList.add("active")
                big.src = `./img/goodsBigPic${e.target.alt}.png`

            }

            )
        })

        // breadcrumb
        let bcItems = document.querySelectorAll(".bcItem")
        bcItems[bcItems.length - 1].addEventListener("click", function (e) {
            e.preventDefault()
        })

        let cData = [{
            cName:"活體區",
            cSub:["中小型魚","大型魚","其他"]
            },
            {
            cName:"魚飼料",
            cSub:["中小型魚","底棲","活餌","大型魚"]
            },
            {
            cName:"魚缸",
            cSub:["迷你缸","智能生態缸","大型缸"]
            },
            {
            cName:"水草區",
            cSub:["陰性水草","莫絲","高莖水草"]
            },
            {
            cName:"水質處理區",
            cSub:["藥劑","水質設備"]
            },
            {
            cName:"周邊用品",
            cSub:["清潔用品","漁網","氣泡石","繁殖盒","風管","水草用品"]
            },
            {
            cName:"設備區",
            cSub:["馬達","照明設備","溫控設備","零配件","過濾器材"]
            },
            {
            cName:"造景與擺飾",
            cSub:["背景板","假水草","沉木","各式飾品"]
            },
        ]
        const cClass = document.querySelector("#cClass")
        const cSubClass = document.querySelector("#cSubClass")
        cClass.addEventListener("change",function () {
            // console.log(cData[this.value]);
            let cSubArray = cData[this.value].cSub
            cSubClass.innerHTML=`<option value="">全部</option>`

            for (let i = 0; i < cSubArray.length; i++) {
                cSubClass.insertAdjacentHTML("beforeend", `<option value="${i}">${cSubArray[i]}</option>`);
            }
            
        })

        let sizebtns = document.querySelectorAll('.size button')
        sizebtns.forEach(function (sizebtn) {
            sizebtn.addEventListener('click',function () {
                sizebtns.forEach(function (i) {
                    i.classList.remove('active')
                })
                this.classList.add('active')
                let price = this.closest('.goodsDescription').querySelector('.money h3')
                if (this.innerHTML=="成魚") {
                    price.innerHTML="$20"
                } else {
                    price.innerHTML="$10"
                }
            })
        })

        // localStorage
        // 取數據
        let cartData = JSON.parse(localStorage.getItem("cartData")) || [];
        const addCartBtn = document.querySelector(".addCartBtn")
        addCartBtn.addEventListener("click",function () {
            let goodsAmount = Number(document.querySelector(".value").textContent)
            

            
            // 商品尺寸
            let goodsSize= document.querySelector('button.active').innerHTML;
            // 找array中對應索引直
            let index = cartData.findIndex(item => item.goodsName === "白金鼠魚" && item.goodsSize ==="成魚");
            let sindex = cartData.findIndex(item => item.goodsSize == "幼魚");
            
            
            console.log(goodsSize);
            
            console.log(index);
            

            // cartIcon邏輯
            if (cartData.length==0) {
                cartNumber.classList.add("show")
            }
            totalGoodsQuantity+= goodsAmount
            cartNumber.innerHTML= totalGoodsQuantity

            cartIcon.classList.add('animate');

            cartIcon.addEventListener('animationend', () => {
                cartIcon.classList.remove('animate');
            }, { once: true });

            if (goodsSize =='成魚') {
                if (index == -1) {
                cartData.push(
                    {
                    goodsName : "白金鼠魚",
                    goodsSize,
                    goodsPrice:20,
                    goodsQuantity:goodsAmount,
                    goodsPicNum:0
                    }
                    
                )
            }else {
                cartData[index].goodsQuantity+= goodsAmount
            }
            } else if(goodsSize =='幼魚'){
                if (sindex == -1) {
                cartData.push(
                    {
                    goodsName : "白金鼠魚",
                    goodsSize,
                    goodsPrice:10,
                    goodsQuantity:goodsAmount,
                    goodsPicNum:0
                    }
                    
                )
            }else {
                cartData[sindex].goodsQuantity+= goodsAmount
            }
            }

            // 更新localStorage
            localStorage.setItem("cartData", JSON.stringify(cartData));
            // alert("已加入購物車")
            let modal = document.querySelector(".modal")
            modal.classList.add('show');
            let modalTimer = setTimeout(()=> {
                modal.classList.remove('show')
            },3000)
            
            modal.addEventListener("click",function () {
                this.classList.remove('show')
                clearTimeout(modalTimer)
            })

            // 數量變回1
            document.querySelector(".value").textContent=1
            value=1
        })

    </script>
    <script src="./hb.js"></script>
    
</body>

</html>
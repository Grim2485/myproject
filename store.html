<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水族天堂</title>
    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- 手風琴 -->
    <link rel="stylesheet" href="./accordion.css">
    <link rel="stylesheet" href="./style.css">
    <style>
        .banner {
            background: url(./img/banner3.jpg) center / cover no-repeat;
        }
        .main {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin: 76px auto;
            overflow: hidden;
            .container {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 1320px;

                .mainHeader {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    width: 100%;
                    border-bottom: 1px solid #B3B1B1;
                    padding-bottom: 21px;
                    .breadcrumb {
    
                        a {
                            color: #666666;
                            font-size: 20px;
                            letter-spacing: 2px;
                        }
                        a:last-child {
                            cursor: default;
                            font-weight: 500;
                        }
                    }
                    .searchbar {
                        position: relative;
                        input {
                            border-radius: 150px;
                            border: 1px solid #B3B1B1;
                            width: 278px;
                            height: 52px;
                            background-color: rgba(0, 0, 0, 0);
                            padding: 0 20px;
    
                        }
                        input::placeholder {
                            color: #666;
                            font-size: 16px;
                            
                        }
                        .icon {
                            position: absolute;
                            right: 20px;
                            top: 13px;
                            cursor: pointer;
                        }
                    }
                }
                .outer {
                    display: flex;
                    justify-content: space-between;
                    width: 100%;
                    margin-top: 76px;
                    .categories {
                        width: 251px;
    
                        h3 {
                            color: #52867E;
                            font-size: 24px;
                            letter-spacing: 2px;
                            margin-bottom: 8px;
                        }
                        .accordion button{
                            font-size: 16px;
                        }
                    }
                    .goods {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        /* width: 987px; */
                        width: 90%;
                        .cards {
                            /* height: 1011px; */
                            display: flex;
                            justify-content: space-between;
                            flex-wrap: wrap;
                            .card {
                                width: 317px;
                                height: 437px;
                                margin-left: 32px;
                                margin-bottom: 32px;
                                background-color: #fff;
                                border-radius: 32px;
                                transition: all .25s ease;
                                .pic {
                                    cursor: pointer;
                                }
                                .content {
                                    margin: 0 auto;
                                    width: 273.75px;
                                    .goodsTitle {
                                        h4 {
                                            font-size: 20px;
                                            letter-spacing: 2px;
                                            margin: 16px 0;
                                        }
                                    }
                                    .goodsContent {
                                        display: flex;
                                        justify-content: space-between;
                                        align-items: center;
                                        .price {
                                            color: #FE3372;
                                            .money {
                                                display: flex;
                                                align-items: baseline;
                                                span {
                                                    font-size: 20px;
                                                    font-weight: bold;
                                                }
                                                h4 {
                                                    margin-left: 6px;
                                                    font-size:32px ;
                                                }
                                            }
                                        }
                                        .addCartBtn {
                                            button {
                                                width: 111.75px;
                                                height: 45.28px;
                                                border-radius: 4px;
                                                border: none;
                                                background-color: #008CEB;
                                                color: #fff;
                                                letter-spacing: 2px;
                                                cursor: pointer;
                                            }
                                            button:hover {
                                                background-color: #0071BE;
                                            }
                                        }
                                    }
                                }
                            }
                            .card:hover {
                                transform: translate(0,-10px) scale(1.05);
                                box-shadow: 2px 2px 4px #4B4B4B44;
                            }
                        }
                        .pageBtns {
                            display: flex;
                            margin-top: 32px;
                            
                            .pageBtn {
                                position: relative;
                                color: #B3B1B1;
                                font-size: 24px;
                                cursor: pointer;
                                width: 64px;
                                height: 48px;
                                background: url("./img/fishVector.svg");
                            }
                            span {
                                position: absolute;
                                left: 50%;
                                top: 50%;
                                transform: translate(-25%,-50%);
                            }
                        }
                        .pageBtn:hover {
                            background: url("./img/fishVectorHover.svg")
                        }
                        .pageBtns .active {
                            color: #52867E;
                            background: url("./img/fishVectorActive.svg")
                        }
                    }
                }
            }
        }
        .cForm {
            display: none;
        }
        .modal {
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            position: fixed;
            z-index: 99999;
            background-color: #fff0;
            display: none;
            .modalContainer {
                position: relative;
                left: 50%;
                top: 50%;
                transform: translate(-50%,-50%);
                width: 340px;
                height: 180px;
                background-color: #0009;
                color: #fff;
                font-size: 24px;
                line-height: 180px;
                text-align: center;
                border-radius: 4px;
                
            }
        }
        .modal.show {
            display: block;
        }
        @media screen and (max-width: 1335px) {
            .main {
                .container {
                    width: 90%;
                    .outer {
                        .goods {
                            .cards {
                                justify-content: center;
                            }
                        }
                    }
                }
            }
        }

        @media screen and (max-width: 1024px) {
            .main .container .outer .goods .cards .card{
                height: auto;
                width: 40%;
                padding-bottom: 12px;
                overflow: hidden;
                display: flex;
                flex-direction: column;
                align-items: center;
                .content {
                    width: 80%;
                    .goodsTitle {
                        h4 {
                            font-size: 16px;
                        }
                    }
                    .goodsContent {
                        .price {
                            p {
                                font-size: 14px;
                            }
                            .money {
                                span {
                                    font-size: 14px;
                                }
                                h4 {
                                    font-size: 16px;
                                }
                            }
                        }
                        .addCartBtn {
                            button {
                                width: 100%;
                                font-size: 14px;
                                letter-spacing: 0px;
                                padding: 0 10px;
                            }
                        }
                    }
                }
            }
        }
        @media screen and (max-width: 768px) {
            .main .container .mainHeader .breadcrumb a {
                font-size: 16px;
            }
            .main .container .mainHeader .searchbar input {
                width: 180px;
            }
            .main .container .mainHeader .searchbar input::placeholder {
                font-size: 14px;
            }
            .main .container .outer .goods {
                width: 64%;
            }
            .main .container .outer .goods .cards {
                width: 100%;
            }
            .main .container .outer .goods .cards .card{
                width: 317px;
            }
        }
        @media screen and (max-width:430px){
            .main .container .mainHeader {
                .searchbar {
                    input {
                        height: 32px;
                    }

                    input::placeholder {
                        font-size: 14px;
                        
                    }
                    .icon {
                        right: 12px;
                        top: 8px;
                        img {
                            width: 16px;
                        }
                    }
                }
            }
            .main .container .outer {
                flex-direction: column;
                margin-top: 32px;
            }
            .main .container .outer .categories {
                width: 100%;
                .accordion {
                    display: none;
                }
                .cForm {
                    display: block;
                    form {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        gap: 8px;
                        .cFormItem {
                            display: flex;
                            flex-direction: column;
                            width: 100%;
                            gap: 8px;
                            select {
                                height: 32px;
                                background-color: #fff0;
                                border: 1px solid #B3B1B1;
                                transition: all .25s;
                            }
                            select:focus {
                                z-index: 3;
                                border-color: #86b7fe;
                                outline: 0;
                                box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
                            }
                        }
                        button[type="submit"] {
                            background-color: #008CEB;
                            color: #fff;
                            border: none;
                            height: 48px;
                            width: 96px;
                            border-radius: 4px;
                            font-size: 16px;
                            margin: 16px 0;
                        }
                    }
                }
            }
            .main .container .outer .goods {
                width: 100%;
                .cards {
                    .card {
                        margin-left: 0;
                        .content .goodsContent .price .money h4 {
                            font-size: 32px;
                        }
                    }
                }
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="navLogo">
            <a href="./index.html">
                <img src="./img/navLogo.svg" alt="Logo">
            </a>
        </div>
        <nav class="navList">
            <ul>
                <li>
                    <a href="./about.html">關於我們</a>
                </li>
                <li>
                    <a href="./news.html">最新消息</a>
                </li>
                <li>
                    <a href="./area.html">門市資訊</a>
                </li>
                <li>
                    <a href="./store.html">所有商品</a>
                </li>
        </nav>
        </div>
        <div class="icons">
            <a href="./contact.html">
                <img src="./img/letter.svg" alt="contact">
            </a>
            <a href="./cart.html" class="cartIcon">
                <img src="./img/cart.svg" alt="cart">
                <div class="cartNumber">1</div>
            </a>
        </div>
        <label class="hb">
            <input type="checkbox" class="menu-switch">
            <span class="bar bar1"></span>
            <span class="bar bar2"></span>
            <span class="bar bar3"></span>
        </label>
        <div class="backdrop"></div>
    </header>
    <section class="banner">
        <div class="title">
            <h1>STORE</h1>
            <h2>線上商店</h2>
        </div>
    </section>
    <div class="main">
        <div class="container">

            <div class="mainHeader">
                <div class="breadcrumb">
                    <a href="" class="bcItem">商品總覽</a>
                </div>
                <div class="searchbar">
                    <input type="text" placeholder="搜尋">
                    <span class="icon">
                        <img src="./img/zoom.svg" alt="">
                    </span>
                </div>
            </div>
            <div class="outer">
                <div class="categories">
                    <h3>商品分類</h3>
                    <div class="accordion">
                        <div class="accordionItem show">
                            <button>活體區</button>
                            <div class="content">
                                <a href="">中小型魚</a>
                                <a href="">大型魚</a>
                                <a href="">其他</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>魚飼料</button>
                            <div class="content">
                                <a href="">中小型魚</a>
                                <a href="">底棲</a>
                                <a href="">活餌</a>
                                <a href="">大型魚</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>魚缸</button>
                            <div class="content">
                                <a href="">迷你缸</a>
                                <a href="">智能生態缸</a>
                                <a href="">大型缸</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>水草區</button>
                            <div class="content">
                                <a href="">陰性水草</a>
                                <a href="">莫絲</a>
                                <a href="">高莖水草</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>水質處理區</button>
                            <div class="content">
                                <a href="">藥劑</a>
                                <a href="">水質設備</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>周邊用品</button>
                            <div class="content">
                                <a href="">清潔用品</a>
                                <a href="">漁網</a>
                                <a href="">氣泡石</a>
                                <a href="">繁殖盒</a>
                                <a href="">風管</a>
                                <a href="">水草用品</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>設備區</button>
                            <div class="content">
                                <a href="">馬達</a>
                                <a href="">照明設備</a>
                                <a href="">溫控設備</a>
                                <a href="">零配件</a>
                                <a href="">過濾器材</a>
                            </div>
                        </div>
                        <div class="accordionItem">
                            <button>造景與擺飾</button>
                            <div class="content">
                                <a href="">背景板</a>
                                <a href="">假水草</a>
                                <a href="">沉木</a>
                                <a href="">各式飾品</a>
                            </div>
                        </div>
                    </div>
                    <div class="cForm">
                        <form action="">
                            <div class="cFormItem">
                                <label for="cClass">選擇類別</label>
                                <select name="" id="cClass">
                                    <option value="0">活體區</option>
                                    <option value="1">魚飼料</option>
                                    <option value="2">魚缸</option>
                                    <option value="3">水草區</option>
                                    <option value="4">水質處理區</option>
                                    <option value="5">周邊用品</option>
                                    <option value="6">設備區</option>
                                    <option value="7">造景與擺飾</option>
                                </select>
                            </div>
                            <div class="cFormItem">
                                <label for="cSubClass">選擇細項</label>
                                <select name="" id="cSubClass">
                                    <option value="">全部</option>
                                    <option value="0">中小型魚</option>
                                    <option value="1">大型魚</option>
                                    <option value="2">其他</option>
                                </select>
                            </div>
                            <button type="submit">送出</button>
                        </form>
                    </div>
                </div>
                <div class="goods">
                    <div class="cards">
                        <div class="card">
                            <div class="pic">
                            <img src="./img/goods0.png" alt="0">
                            </div>
                            <div class="content">
                                <div class="goodsTitle">
                                    <h4>白金鼠魚</h4>
                                </div>
                                <div class="goodsContent">
                                    <div class="price">
                                        <p>促銷價</p>
                                        <div class="money">
                                            <span>NT</span>
                                            <h4>$20</h4>
                                        </div>
                                    </div>
                                    <div class="addCartBtn">
                                        <button>加購物車</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="pic">
                            <img src="./img/goods1.png" alt="1">
                            </div>
                            <div class="content">
                                <div class="goodsTitle">
                                    <h4>紅白蘭壽金魚</h4>
                                </div>
                                <div class="goodsContent">
                                    <div class="price">
                                        <p>促銷價</p>
                                        <div class="money">
                                            <span>NT</span>
                                            <h4>$50</h4>
                                        </div>
                                    </div>
                                    <div class="addCartBtn">
                                        <button>加購物車</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="pic">
                            <img src="./img/goods2.png" alt="2">
                            </div>
                            <div class="content">
                                <div class="goodsTitle">
                                    <h4>白色半月鬥魚</h4>
                                </div>
                                <div class="goodsContent">
                                    <div class="price">
                                        <p>促銷價</p>
                                        <div class="money">
                                            <span>NT</span>
                                            <h4>$150</h4>
                                        </div>
                                    </div>
                                    <div class="addCartBtn">
                                        <button>加購物車</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="pic">
                            <img src="./img/goods3.png" alt="3">
                            </div>
                            <div class="content">
                                <div class="goodsTitle">
                                    <h4>金絲神仙魚</h4>
                                </div>
                                <div class="goodsContent">
                                    <div class="price">
                                        <p>促銷價</p>
                                        <div class="money">
                                            <span>NT</span>
                                            <h4>$120</h4>
                                        </div>
                                    </div>
                                    <div class="addCartBtn">
                                        <button>加購物車</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="pic">
                            <img src="./img/goods4.png" alt="4">
                            </div>
                            <div class="content">
                                <div class="goodsTitle">
                                    <h4>熊貓鼠魚</h4>
                                </div>
                                <div class="goodsContent">
                                    <div class="price">
                                        <p>促銷價</p>
                                        <div class="money">
                                            <span>NT</span>
                                            <h4>$20</h4>
                                        </div>
                                    </div>
                                    <div class="addCartBtn">
                                        <button>加購物車</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="pic">
                            <img src="./img/goods5.png" alt="5">
                            </div>
                            <div class="content">
                                <div class="goodsTitle">
                                    <h4>雙色隆頭魚</h4>
                                </div>
                                <div class="goodsContent">
                                    <div class="price">
                                        <p>促銷價</p>
                                        <div class="money">
                                            <span>NT</span>
                                            <h4>$50</h4>
                                        </div>
                                    </div>
                                    <div class="addCartBtn">
                                        <button>加購物車</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pageBtns">
                        <div class="pageBtn page1 active">
                            <span>1</span>
                        </div>
                        <div class="pageBtn page2">
                            <span>2</span>
                        </div>
                        <div class="pageBtn page3">
                            <span>3</span>
                        </div>
                        <div class="pageBtn page4">
                            <span>4</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal">
            <div class="modalContainer">
                <p>商品已加入購物車</p>
            </div>
        </div>
    </div>
    <footer>
        <div class="outer">

            <div class="footerlogo">
                <a href="./index.html">
                    <img src="./img/footerLogo.svg" alt="Logo">
                </a>
            </div>
            <div class="info">
                <p>營業時間 | 周一至周六09:30-20:00</p>
                <p>電話 | 03-8964426</p>
                <p>傳真 | 03-8964426</p>
                <p>地址 | 320桃園市中壢區復興路46號</p>
            </div>
            <div class="tag">
                <a href="./about.html">關於我們</a>
                <a href="./news.html">最新消息</a>
                <a href="./area.html">門市資訊</a>
                <a href="./store.html">所有商品</a>
            </div>
            <div class="icons">
                <a href="" class="icon">
                    <img src="./img/ic_fb.svg" alt="fb">
                </a>
                <a href="" class="icon">
                    <img src="./img/ic_ig.svg" alt="ig">
                </a>
                <a href="" class="icon">
                    <img src="./img/ic_twitter.svg" alt="twitter">
                </a>
            </div>
        </div>
    </footer>
    <!-- AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- Initialize AOS -->
    <script>
    AOS.init();
    </script>
    <!-- 手風琴 -->
    <script src="./accordion.js">
    </script>
    <script src="./cart.js"></script>
    <script>
        let goodsCards = document.querySelectorAll(".pic")
        goodsCards.forEach(function (goodsCard) {
            goodsCard.addEventListener("click",function () {
                window.location.href = "storeDetail.html";
                
            })
        })

        let bcItems = document.querySelectorAll(".bcItem")
        bcItems[bcItems.length-1].addEventListener("click",function (e) {
            e.preventDefault()
        })

        let cData = [{
            cName:"活體區",
            cSub:["中小型魚","大型魚","其他"]
            },
            {
            cName:"魚飼料",
            cSub:["中小型魚","底棲","活餌","大型魚"]
            },
            {
            cName:"魚缸",
            cSub:["迷你缸","智能生態缸","大型缸"]
            },
            {
            cName:"水草區",
            cSub:["陰性水草","莫絲","高莖水草"]
            },
            {
            cName:"水質處理區",
            cSub:["藥劑","水質設備"]
            },
            {
            cName:"周邊用品",
            cSub:["清潔用品","漁網","氣泡石","繁殖盒","風管","水草用品"]
            },
            {
            cName:"設備區",
            cSub:["馬達","照明設備","溫控設備","零配件","過濾器材"]
            },
            {
            cName:"造景與擺飾",
            cSub:["背景板","假水草","沉木","各式飾品"]
            },
        ]
        const cClass = document.querySelector("#cClass")
        const cSubClass = document.querySelector("#cSubClass")
        cClass.addEventListener("change",function () {
            // console.log(cData[this.value]);
            let cSubArray = cData[this.value].cSub
            cSubClass.innerHTML=`<option value="">全部</option>`

            for (let i = 0; i < cSubArray.length; i++) {
                cSubClass.insertAdjacentHTML("beforeend", `<option value="${i}">${cSubArray[i]}</option>`);
            }
            
        })


        // localStorage
        // 取數據
        let cartData = JSON.parse(localStorage.getItem("cartData")) || [];
        const addCartBtns = document.querySelectorAll(".addCartBtn")
        addCartBtns.forEach(function (addCartBtn) {
            addCartBtn.addEventListener("click",function () {
                //父容器
                let btnParent = this.closest(".content")
                //商品對應價格
                let goodsPrice = Number(btnParent.querySelector(".money h4").textContent.replace("$",""))
                
                //商品對應圖索引
                let goodsPicNum = Number(this.closest(".card").querySelector(".pic img").alt)

                
                
                // array中對應名稱
                let goodsItemName = btnParent.querySelector(".goodsTitle h4").textContent


                // 找array中對應索引直
                let index = cartData.findIndex(item => item.goodsName === goodsItemName && item.goodsSize=="成魚");
                
                // cartIcon邏輯
                if (cartData.length==0) {
                    cartNumber.classList.add("show")
                }
                totalGoodsQuantity++
                cartNumber.innerHTML= totalGoodsQuantity
                cartIcon.classList.add('animate');

                cartIcon.addEventListener('animationend', () => {
                    cartIcon.classList.remove('animate');
                }, { once: true });

                if (index== -1) {
                    cartData.push(
                        {
                        goodsName : goodsItemName,
                        goodsSize : "成魚",
                        goodsPrice,
                        goodsQuantity:1,
                        goodsPicNum
                        }
                        
                    )
                    // console.log(cartData);
                } else {
                    cartData[index].goodsQuantity++
                }
                // 更新localStorage
                localStorage.setItem("cartData", JSON.stringify(cartData));
                // alert("已加入購物車")
                let modal = document.querySelector(".modal")
                modal.classList.add('show');
                let modalTimer = setTimeout(()=> {
                    modal.classList.remove('show')
                },3000)
                
                modal.addEventListener("click",function () {
                    this.classList.remove('show')
                    clearTimeout(modalTimer)
                })

            })
        })
    </script>
    <script src="./hb.js"></script>
    
</body>

</html>